{{- with .Params.projects -}}
<ul class="projects clearfix">
  {{- range . -}}
    <li class="project{{with .class}} {{.}}{{end}}">
      <a href="{{.link}}">
        {{- with .image -}}
          {{- $imageUrl := .url -}}
          {{- $imageAltText := .alt_text -}}
          {{- $responsiveSources := .responsive_sources -}}
          {{- with $imageUrl -}}
            <picture>
              {{- with $responsiveSources -}}
                {{- range $imageWidth, $imageSourceUrl := . -}}
                  {{- $.Scratch.Add "imageSrcSetArray" (slice (print ($imageSourceUrl | relURL) " " $imageWidth "w")) -}}
                {{- end -}}
                <source media="(max-width: 46.25em)" srcset="{{delimit ($.Scratch.Get "imageSrcSetArray") ", "}}">
                {{- $.Scratch.Delete "imageSrcSetArray" -}}
              {{- end -}}
              <img class="project-image" src="{{. | relURL}}" alt="{{$imageAltText}}">
            </picture>
          {{- end -}}
        {{- end -}}
        <div class="project-hover">
          <div class="project-caption">
            {{- with .title -}}
              <div class="project-title">{{.}}</div>
            {{- end -}}
            {{- with .type -}}
              <div class="project-type">{{.}}</div>
            {{- end -}}
          </div>
        </div>
      </a>
    </li>
  {{- end -}}
</ul>
{{- end -}}